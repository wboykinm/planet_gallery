<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <link rel="shortcut icon" type='image/x-icon' href="/favicon.ico"/>
  <meta content="Deconstructed planet" name="description">
  <meta content="Bill Morris" name="author">
  <title>Deconstructed planet</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/darkly/bootstrap.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style>
    .modal-dialog {max-width:600px;}
    .caption-hidden {
      visibility: hidden;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row" style="text-align:center; padding:0 0 20px 0; margin-bottom:40px;">
      <h1>Deconstructed Planet</h1>
      <h4><a href="https://medium.com/planet-stories/drawing-the-planet-in-brushstrokes-bc54a686fb30#.exz251be8" target="_blank">Deep-learning-assisted renderings</a> of satellite imagery in a generally-cubist form.</h4>
    </div>
    <div id="main" class="row">
    </div>
  </div><!-- /container -->
  <div tabindex="-1" class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
      <div class="modal-content">
      	<div class="modal-body">
          <img id="image-gallery-image" class="img-responsive" src="">
      	</div>
      	<div class="modal-footer">
          <ul class="list-inline">
            <li><p class="modal-title" id="myModalLabel"></p></li>
            <li><button class="btn btn-default" data-dismiss="modal">Close</button></li>
          </ul>
      	</div>
      </div>
    </div>
  </div>
  <script>
    $.getJSON("https://spreadsheets.google.com/feeds/list/1HyZ4TWXrjxcTOjYhJpqEPYYiw3frfzcSRKZ2aT0i41M/1/public/values?alt=json", function(data) {
      records = data.feed.entry
      var mainList = document.getElementById('main');
      //console.log(records[1])
      for (i = 0; i < records.length; i++) {
        var renderLine = document.createElement('div');
        renderLine.className = 'col-lg-3 col-sm-4 col-xs-6 entry';
        renderLine.setAttribute('data-target', '#myModal')
        renderLine.setAttribute('data-toggle', 'modal')
        renderLine.setAttribute('type', 'button')
        var renderA = document.createElement('a');
        renderA.title = 'Image ' + (i + 1)
        renderA.href = '#'
        var render = document.createElement('img');
        render.src = records[i].gsx$renderurl.$t;
        render.className = 'img-responsive img-circle';
        var caption = document.createElement('h5');
        caption.className = 'caption-hidden';
        caption.innerHTML = records[i].gsx$description.$t;
        renderA.appendChild(render)
        renderA.appendChild(caption)
        renderLine.appendChild(renderA)
        mainList.appendChild(renderLine)
      }
      $(document).ready(function() {
        $('.entry').click(function(){
          var entryParent = this.firstChild
          var caption = entryParent.text
          var imageSrc = entryParent.firstChild.src
          $('.modal-title').html(caption);
          $('#image-gallery-image').attr('src', imageSrc)
          //$('#myModal').modal({show:true});
        });
      });
    });
  </script>
</body>
</html>